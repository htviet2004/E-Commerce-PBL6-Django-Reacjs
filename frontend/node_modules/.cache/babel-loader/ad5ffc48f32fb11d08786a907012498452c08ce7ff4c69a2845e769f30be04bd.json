{"ast":null,"code":"var _jsxFileName = \"C:\\\\VIET\\\\PBL6\\\\main\\\\frontend\\\\src\\\\pages\\\\SearchResults.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ProductGrid from '../components/ProductGrid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction useQuery() {\n  _s();\n  const {\n    search\n  } = useLocation();\n  return useMemo(() => new URLSearchParams(search), [search]);\n}\n_s(useQuery, \"I+9F+Vhfmc3otMLqUKFlYflxhf8=\", false, function () {\n  return [useLocation];\n});\nexport default function SearchResults() {\n  _s2();\n  const qs = useQuery();\n  const mode = qs.get('mode') || 'text';\n  const q = (qs.get('q') || '').trim();\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState(null);\n  useEffect(() => {\n    let cancelled = false;\n    async function run() {\n      setLoading(true);\n      setErr(null);\n      try {\n        if (mode === 'image') {\n          const cached = sessionStorage.getItem('imageSearchResults');\n          const arr = cached ? JSON.parse(cached) : [];\n          if (!cancelled) setResults(Array.isArray(arr) ? arr : []);\n        } else {\n          if (!q) {\n            setResults([]);\n            return;\n          }\n          const res = await fetch(`http://localhost:8000/api/products/?search=${encodeURIComponent(q)}`);\n          const data = await res.json();\n          if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.error) || `HTTP ${res.status}`);\n          const items = Array.isArray(data) ? data : data.results || [];\n          if (!cancelled) setResults(items);\n        }\n      } catch (e) {\n        if (!cancelled) setErr(String(e.message || e));\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    run();\n    return () => {\n      cancelled = true;\n    };\n  }, [mode, q]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-page container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm \", mode === 'image' ? '(·∫£nh)' : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), mode !== 'image' && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"T\\u1EEB kh\\xF3a: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: q || '(tr·ªëng)'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 40\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 28\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#c00',\n        margin: '12px 0'\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this) : results.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty-state\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-icon\",\n        children: \"\\uD83D\\uDD0E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Kh\\xF4ng t\\xECm th\\u1EA5y k\\u1EBFt qu\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Th\\u1EED t\\u1EEB kh\\xF3a kh\\xE1c ho\\u1EB7c t\\xECm b\\u1EB1ng \\u1EA3nh \\u1EDF g\\xF3c ph\\u1EA3i \\xF4 t\\xECm ki\\u1EBFm.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(ProductGrid, {\n      products: results\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s2(SearchResults, \"ogxOlxhCEkeseg6rQPsY+A7sZvA=\", false, function () {\n  return [useQuery];\n});\n_c = SearchResults;\nvar _c;\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useLocation","ProductGrid","jsxDEV","_jsxDEV","useQuery","_s","search","URLSearchParams","SearchResults","_s2","qs","mode","get","q","trim","results","setResults","loading","setLoading","err","setErr","cancelled","run","cached","sessionStorage","getItem","arr","JSON","parse","Array","isArray","res","fetch","encodeURIComponent","data","json","ok","Error","error","status","items","e","String","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","margin","length","products","_c","$RefreshReg$"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/SearchResults.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport ProductGrid from '../components/ProductGrid';\r\n\r\nfunction useQuery() {\r\n  const { search } = useLocation();\r\n  return useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n\r\nexport default function SearchResults() {\r\n  const qs = useQuery();\r\n  const mode = qs.get('mode') || 'text';\r\n  const q = (qs.get('q') || '').trim();\r\n\r\n  const [results, setResults] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function run() {\r\n      setLoading(true); setErr(null);\r\n      try {\r\n        if (mode === 'image') {\r\n          const cached = sessionStorage.getItem('imageSearchResults');\r\n          const arr = cached ? JSON.parse(cached) : [];\r\n          if (!cancelled) setResults(Array.isArray(arr) ? arr : []);\r\n        } else {\r\n          if (!q) { setResults([]); return; }\r\n          const res = await fetch(`http://localhost:8000/api/products/?search=${encodeURIComponent(q)}`);\r\n          const data = await res.json();\r\n          if (!res.ok) throw new Error(data?.error || `HTTP ${res.status}`);\r\n          const items = Array.isArray(data) ? data : (data.results || []);\r\n          if (!cancelled) setResults(items);\r\n        }\r\n      } catch (e) {\r\n        if (!cancelled) setErr(String(e.message || e));\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n    run();\r\n    return () => { cancelled = true; };\r\n  }, [mode, q]);\r\n\r\n  return (\r\n    <div className=\"search-page container\">\r\n      <h1>K·∫øt qu·∫£ t√¨m ki·∫øm {mode === 'image' ? '(·∫£nh)' : ''}</h1>\r\n      {mode !== 'image' && <p>T·ª´ kh√≥a: <strong>{q || '(tr·ªëng)'}</strong></p>}\r\n      {err && <div style={{ color: '#c00', margin: '12px 0' }}>{err}</div>}\r\n      {loading ? (\r\n        <p>ƒêang t·∫£i...</p>\r\n      ) : results.length === 0 ? (\r\n        <div className=\"empty-state\">\r\n          <div className=\"empty-icon\">üîé</div>\r\n          <h2>Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</h2>\r\n          <p>Th·ª≠ t·ª´ kh√≥a kh√°c ho·∫∑c t√¨m b·∫±ng ·∫£nh ·ªü g√≥c ph·∫£i √¥ t√¨m ki·∫øm.</p>\r\n        </div>\r\n      ) : (\r\n        <ProductGrid products={results} />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,WAAW,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM;IAAEC;EAAO,CAAC,GAAGN,WAAW,CAAC,CAAC;EAChC,OAAOF,OAAO,CAAC,MAAM,IAAIS,eAAe,CAACD,MAAM,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;AAC7D;AAACD,EAAA,CAHQD,QAAQ;EAAA,QACIJ,WAAW;AAAA;AAIhC,eAAe,SAASQ,aAAaA,CAAA,EAAG;EAAAC,GAAA;EACtC,MAAMC,EAAE,GAAGN,QAAQ,CAAC,CAAC;EACrB,MAAMO,IAAI,GAAGD,EAAE,CAACE,GAAG,CAAC,MAAM,CAAC,IAAI,MAAM;EACrC,MAAMC,CAAC,GAAG,CAACH,EAAE,CAACE,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,EAAEE,IAAI,CAAC,CAAC;EAEpC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACoB,GAAG,EAAEC,MAAM,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAEpCF,SAAS,CAAC,MAAM;IACd,IAAIwB,SAAS,GAAG,KAAK;IACrB,eAAeC,GAAGA,CAAA,EAAG;MACnBJ,UAAU,CAAC,IAAI,CAAC;MAAEE,MAAM,CAAC,IAAI,CAAC;MAC9B,IAAI;QACF,IAAIT,IAAI,KAAK,OAAO,EAAE;UACpB,MAAMY,MAAM,GAAGC,cAAc,CAACC,OAAO,CAAC,oBAAoB,CAAC;UAC3D,MAAMC,GAAG,GAAGH,MAAM,GAAGI,IAAI,CAACC,KAAK,CAACL,MAAM,CAAC,GAAG,EAAE;UAC5C,IAAI,CAACF,SAAS,EAAEL,UAAU,CAACa,KAAK,CAACC,OAAO,CAACJ,GAAG,CAAC,GAAGA,GAAG,GAAG,EAAE,CAAC;QAC3D,CAAC,MAAM;UACL,IAAI,CAACb,CAAC,EAAE;YAAEG,UAAU,CAAC,EAAE,CAAC;YAAE;UAAQ;UAClC,MAAMe,GAAG,GAAG,MAAMC,KAAK,CAAC,8CAA8CC,kBAAkB,CAACpB,CAAC,CAAC,EAAE,CAAC;UAC9F,MAAMqB,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,CAAC;UAC7B,IAAI,CAACJ,GAAG,CAACK,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,KAAK,KAAI,QAAQP,GAAG,CAACQ,MAAM,EAAE,CAAC;UACjE,MAAMC,KAAK,GAAGX,KAAK,CAACC,OAAO,CAACI,IAAI,CAAC,GAAGA,IAAI,GAAIA,IAAI,CAACnB,OAAO,IAAI,EAAG;UAC/D,IAAI,CAACM,SAAS,EAAEL,UAAU,CAACwB,KAAK,CAAC;QACnC;MACF,CAAC,CAAC,OAAOC,CAAC,EAAE;QACV,IAAI,CAACpB,SAAS,EAAED,MAAM,CAACsB,MAAM,CAACD,CAAC,CAACE,OAAO,IAAIF,CAAC,CAAC,CAAC;MAChD,CAAC,SAAS;QACR,IAAI,CAACpB,SAAS,EAAEH,UAAU,CAAC,KAAK,CAAC;MACnC;IACF;IACAI,GAAG,CAAC,CAAC;IACL,OAAO,MAAM;MAAED,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,CAACV,IAAI,EAAEE,CAAC,CAAC,CAAC;EAEb,oBACEV,OAAA;IAAKyC,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpC1C,OAAA;MAAA0C,QAAA,GAAI,qCAAiB,EAAClC,IAAI,KAAK,OAAO,GAAG,OAAO,GAAG,EAAE;IAAA;MAAAmC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EAC1DtC,IAAI,KAAK,OAAO,iBAAIR,OAAA;MAAA0C,QAAA,GAAG,mBAAS,eAAA1C,OAAA;QAAA0C,QAAA,EAAShC,CAAC,IAAI;MAAS;QAAAiC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EACrE9B,GAAG,iBAAIhB,OAAA;MAAK+C,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAS,CAAE;MAAAP,QAAA,EAAE1B;IAAG;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACnEhC,OAAO,gBACNd,OAAA;MAAA0C,QAAA,EAAG;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,GAChBlC,OAAO,CAACsC,MAAM,KAAK,CAAC,gBACtBlD,OAAA;MAAKyC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1B1C,OAAA;QAAKyC,SAAS,EAAC,YAAY;QAAAC,QAAA,EAAC;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACpC9C,OAAA;QAAA0C,QAAA,EAAI;MAAsB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC/B9C,OAAA;QAAA0C,QAAA,EAAG;MAAyD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7D,CAAC,gBAEN9C,OAAA,CAACF,WAAW;MAACqD,QAAQ,EAAEvC;IAAQ;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAClC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACxC,GAAA,CAtDuBD,aAAa;EAAA,QACxBJ,QAAQ;AAAA;AAAAmD,EAAA,GADG/C,aAAa;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}