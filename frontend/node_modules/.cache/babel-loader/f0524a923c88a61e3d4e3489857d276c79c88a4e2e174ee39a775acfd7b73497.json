{"ast":null,"code":"var _jsxFileName = \"C:\\\\VIET\\\\PBL6\\\\main\\\\frontend\\\\src\\\\pages\\\\CategoryPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ProductGrid from '../components/ProductGrid';\nimport ImageSearchUpload from '../components/ImageSearchUpload';\nimport Loading from '../components/Loading';\nimport '../assets/CategoryPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CategoryPage() {\n  _s();\n  var _ref, _ref2, _params$slug;\n  const params = useParams();\n  const rawCategoryParam = (_ref = (_ref2 = (_params$slug = params.slug) !== null && _params$slug !== void 0 ? _params$slug : params.categoryName) !== null && _ref2 !== void 0 ? _ref2 : params.category) !== null && _ref !== void 0 ? _ref : '';\n  const slugFromUrl = rawCategoryParam ? decodeURIComponent(rawCategoryParam) : '';\n  const navigate = useNavigate();\n\n  // Data\n  const [categories, setCategories] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  // UI/Filter state\n  const [query, setQuery] = useState('');\n  const [priceRange, setPriceRange] = useState({\n    min: '',\n    max: ''\n  });\n  const [sortBy, setSortBy] = useState('relevance');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showFilters, setShowFilters] = useState(false);\n  const [imageResults, setImageResults] = useState(null); // danh s√°ch tr·∫£ v·ªÅ t·ª´ search ·∫£nh\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        var _cRes$results, _pRes$results;\n        const [cRes, pRes] = await Promise.all([fetch('http://localhost:8000/api/categories/').then(r => r.json()), fetch('http://localhost:8000/api/products/').then(r => r.json())]);\n        if (cancelled) return;\n        const cats = Array.isArray(cRes) ? cRes : (_cRes$results = cRes.results) !== null && _cRes$results !== void 0 ? _cRes$results : [];\n        const prods = Array.isArray(pRes) ? pRes : (_pRes$results = pRes.results) !== null && _pRes$results !== void 0 ? _pRes$results : [];\n        setCategories(cats);\n        setProducts(prods);\n      } catch (err) {\n        if (cancelled) return;\n        console.error('CategoryPage load error', err);\n        setError('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  // Determine active category\n  const activeCategoryObj = useMemo(() => {\n    var _categories$find;\n    if (!slugFromUrl) return null;\n    return (_categories$find = categories.find(c => {\n      var _c$slug, _c$name, _c$id;\n      const slug = String((_c$slug = c === null || c === void 0 ? void 0 : c.slug) !== null && _c$slug !== void 0 ? _c$slug : '').toLowerCase();\n      const name = String((_c$name = c === null || c === void 0 ? void 0 : c.name) !== null && _c$name !== void 0 ? _c$name : '').toLowerCase();\n      const id = String((_c$id = c === null || c === void 0 ? void 0 : c.id) !== null && _c$id !== void 0 ? _c$id : '').toLowerCase();\n      const param = String(rawCategoryParam !== null && rawCategoryParam !== void 0 ? rawCategoryParam : '').toLowerCase();\n      return slug === param || name === param || id === param;\n    })) !== null && _categories$find !== void 0 ? _categories$find : null;\n  }, [categories, rawCategoryParam, slugFromUrl]);\n\n  // Product matching\n  function productMatchesCategory(prod, identifier) {\n    var _ref3, _pc$id, _ref4, _pc$name, _pc$slug;\n    if (!identifier) return true;\n    const idNorm = String(identifier).toLowerCase();\n    const pc = prod.category;\n    if (pc == null) return false;\n    if (typeof pc === 'string' || typeof pc === 'number') {\n      const v = String(pc).toLowerCase();\n      return v === idNorm || v.includes(idNorm) || idNorm.includes(v);\n    }\n    const pid = String((_ref3 = (_pc$id = pc.id) !== null && _pc$id !== void 0 ? _pc$id : pc.pk) !== null && _ref3 !== void 0 ? _ref3 : '').toLowerCase();\n    const pname = String((_ref4 = (_pc$name = pc.name) !== null && _pc$name !== void 0 ? _pc$name : pc.title) !== null && _ref4 !== void 0 ? _ref4 : '').toLowerCase();\n    const pslug = String((_pc$slug = pc.slug) !== null && _pc$slug !== void 0 ? _pc$slug : '').toLowerCase();\n    return pid === idNorm || pname === idNorm || pslug === idNorm || pname.includes(idNorm) || pslug.includes(idNorm);\n  }\n\n  // Filtered products\n  const filteredProducts = useMemo(() => {\n    var _ref5, _activeCategoryObj$sl;\n    const activeIdentifier = activeCategoryObj ? (_ref5 = (_activeCategoryObj$sl = activeCategoryObj.slug) !== null && _activeCategoryObj$sl !== void 0 ? _activeCategoryObj$sl : activeCategoryObj.name) !== null && _ref5 !== void 0 ? _ref5 : String(activeCategoryObj.id) : slugFromUrl || '';\n    const q = (query || '').trim().toLowerCase();\n    const list = (products || []).filter(product => {\n      var _product$price;\n      if (activeIdentifier && !productMatchesCategory(product, activeIdentifier)) return false;\n      if (q) {\n        var _product$name, _product$description;\n        const name = String((_product$name = product.name) !== null && _product$name !== void 0 ? _product$name : '').toLowerCase();\n        const desc = String((_product$description = product.description) !== null && _product$description !== void 0 ? _product$description : '').toLowerCase();\n        if (!name.includes(q) && !desc.includes(q)) return false;\n      }\n      const price = Number((_product$price = product.price) !== null && _product$price !== void 0 ? _product$price : 0);\n      if (priceRange.min && price < Number(priceRange.min)) return false;\n      if (priceRange.max && price > Number(priceRange.max)) return false;\n      return true;\n    });\n    switch (sortBy) {\n      case 'price-low':\n        list.sort((a, b) => (Number(a.price) || 0) - (Number(b.price) || 0));\n        break;\n      case 'price-high':\n        list.sort((a, b) => (Number(b.price) || 0) - (Number(a.price) || 0));\n        break;\n      case 'name':\n        list.sort((a, b) => String(a.name).localeCompare(String(b.name)));\n        break;\n      case 'newest':\n        list.sort((a, b) => (b.id || 0) - (a.id || 0));\n        break;\n      default:\n        break;\n    }\n    return list;\n  }, [products, activeCategoryObj, slugFromUrl, query, priceRange, sortBy]);\n\n  // Header count d√πng effectiveFiltered thay v√¨ filteredProducts\n  const effectiveFiltered = useMemo(() => {\n    if (imageResults) return imageResults;\n    return filteredProducts;\n  }, [imageResults, filteredProducts]);\n  const ITEMS_PER_PAGE = 24;\n  const totalPages = Math.max(1, Math.ceil(effectiveFiltered.length / ITEMS_PER_PAGE));\n  useEffect(() => {\n    if (currentPage > totalPages) setCurrentPage(totalPages);\n  }, [currentPage, totalPages]);\n  const paginatedProducts = useMemo(() => {\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\n    return effectiveFiltered.slice(start, start + ITEMS_PER_PAGE);\n  }, [effectiveFiltered, currentPage]);\n\n  // Handlers\n  const handleCategoryChange = catSlugOrName => {\n    var _found$slug;\n    if (!catSlugOrName) {\n      navigate('/products');\n      return;\n    }\n    const found = categories.find(c => String(c.slug) === String(catSlugOrName) || String(c.name) === String(catSlugOrName) || String(c.id) === String(catSlugOrName));\n    const toSlug = found ? (_found$slug = found.slug) !== null && _found$slug !== void 0 ? _found$slug : found.name : catSlugOrName;\n    navigate(`/category/${encodeURIComponent(toSlug)}`);\n    setShowFilters(false);\n  };\n  const handleClearFilters = () => {\n    setQuery('');\n    setPriceRange({\n      min: '',\n      max: ''\n    });\n    setSortBy('relevance');\n    setCurrentPage(1);\n    setImageResults(null); // tho√°t ch·∫ø ƒë·ªô t√¨m b·∫±ng ·∫£nh\n  };\n\n  // replace handleImageFileChange usage b·∫±ng ImageSearchUpload\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-page\",\n      children: /*#__PURE__*/_jsxDEV(Loading, {\n        message: \"\\u0110ang t\\u1EA3i s\\u1EA3n ph\\u1EA9m...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"C\\xF3 l\\u1ED7i x\\u1EA3y ra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          className: \"btn btn-primary\",\n          children: \"Th\\u1EED l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"breadcrumb\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/\",\n            children: \"Trang ch\\u1EE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"breadcrumb-separator\",\n            children: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"breadcrumb-current\",\n            children: (activeCategoryObj === null || activeCategoryObj === void 0 ? void 0 : activeCategoryObj.name) || slugFromUrl || 'T·∫•t c·∫£ s·∫£n ph·∫©m'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"category-title\",\n          children: (activeCategoryObj === null || activeCategoryObj === void 0 ? void 0 : activeCategoryObj.name) || slugFromUrl || 'T·∫•t c·∫£ s·∫£n ph·∫©m'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"category-subtitle\",\n          children: [effectiveFiltered.length, \" s\\u1EA3n ph\\u1EA9m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: `filters-sidebar ${showFilters ? 'mobile-open' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filters-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"B\\u1ED9 l\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"filters-close\",\n              onClick: () => setShowFilters(false),\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"filter-label\",\n              children: \"T\\xECm ki\\u1EBFm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"filter-input\",\n              placeholder: \"T\\xECm s\\u1EA3n ph\\u1EA9m...\",\n              value: query,\n              onChange: e => setQuery(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"filter-label\",\n              children: \"Danh m\\u1EE5c\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"category-list\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: `category-item ${!slugFromUrl ? 'active' : ''}`,\n                onClick: () => handleCategoryChange(''),\n                children: \"T\\u1EA5t c\\u1EA3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `category-item ${(activeCategoryObj === null || activeCategoryObj === void 0 ? void 0 : activeCategoryObj.id) === cat.id ? 'active' : ''}`,\n                onClick: () => handleCategoryChange(cat.slug || cat.name),\n                children: cat.name\n              }, cat.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"filter-label\",\n              children: \"Kho\\u1EA3ng gi\\xE1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price-range-inputs\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"filter-input\",\n                placeholder: \"T\\u1EEB\",\n                value: priceRange.min,\n                onChange: e => setPriceRange(prev => ({\n                  ...prev,\n                  min: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price-separator\",\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"filter-input\",\n                placeholder: \"\\u0110\\u1EBFn\",\n                value: priceRange.max,\n                onChange: e => setPriceRange(prev => ({\n                  ...prev,\n                  max: e.target.value\n                }))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"filter-label\",\n              children: \"S\\u1EAFp x\\u1EBFp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"filter-select\",\n              value: sortBy,\n              onChange: e => setSortBy(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"relevance\",\n                children: \"Li\\xEAn quan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"price-low\",\n                children: \"Gi\\xE1: Th\\u1EA5p \\u0111\\u1EBFn cao\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"price-high\",\n                children: \"Gi\\xE1: Cao \\u0111\\u1EBFn th\\u1EA5p\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name\",\n                children: \"T\\xEAn: A-Z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"newest\",\n                children: \"M\\u1EDBi nh\\u1EA5t\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-clear-filters\",\n            onClick: handleClearFilters,\n            children: \"X\\xF3a b\\u1ED9 l\\u1ECDc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"products-toolbar\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-toggle-filters\",\n              onClick: () => setShowFilters(!showFilters),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDD0D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this), \"B\\u1ED9 l\\u1ECDc\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ImageSearchUpload, {\n              k: 48,\n              onStart: () => setLoading(true),\n              onFinish: () => setLoading(false),\n              onResults: mapped => {\n                setImageResults(mapped);\n                setCurrentPage(1);\n                setShowFilters(false);\n              },\n              onError: msg => setError(msg)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), imageResults && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              style: {\n                marginLeft: 8\n              },\n              onClick: () => setImageResults(null),\n              children: \"H\\u1EE7y k\\u1EBFt qu\\u1EA3 \\u1EA3nh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"results-info\",\n              children: [\"Hi\\u1EC3n th\\u1ECB \", paginatedProducts.length, \" / \", effectiveFiltered.length, \" s\\u1EA3n ph\\u1EA9m\", imageResults && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  marginLeft: 8,\n                  color: '#888'\n                },\n                children: \"(k\\u1EBFt qu\\u1EA3 t\\u1EEB \\u1EA3nh)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), effectiveFiltered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-state\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-icon\",\n              children: \"\\uD83D\\uDCE6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"Kh\\xF4ng t\\xECm th\\u1EA5y s\\u1EA3n ph\\u1EA9m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Vui l\\xF2ng th\\u1EED \\u0111i\\u1EC1u ch\\u1EC9nh b\\u1ED9 l\\u1ECDc ho\\u1EB7c t\\xECm ki\\u1EBFm kh\\xE1c\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: handleClearFilters,\n              children: \"X\\xF3a b\\u1ED9 l\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ProductGrid, {\n              products: paginatedProducts\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pagination\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagination-btn\",\n                onClick: () => setCurrentPage(p => Math.max(1, p - 1)),\n                disabled: currentPage === 1,\n                children: \"\\u2190 Tr\\u01B0\\u1EDBc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pagination-pages\",\n                children: Array.from({\n                  length: totalPages\n                }, (_, i) => i + 1).map(page => /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `pagination-page ${currentPage === page ? 'active' : ''}`,\n                  onClick: () => setCurrentPage(page),\n                  children: page\n                }, page, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagination-btn\",\n                onClick: () => setCurrentPage(p => Math.min(totalPages, p + 1)),\n                disabled: currentPage === totalPages,\n                children: \"Sau \\u2192\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-overlay-backdrop\",\n      onClick: () => setShowFilters(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n_s(CategoryPage, \"h/gQLPMWPhuSUs1u0F1VpVZasJY=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CategoryPage;\nvar _c;\n$RefreshReg$(_c, \"CategoryPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useParams","useNavigate","ProductGrid","ImageSearchUpload","Loading","jsxDEV","_jsxDEV","Fragment","_Fragment","CategoryPage","_s","_ref","_ref2","_params$slug","params","rawCategoryParam","slug","categoryName","category","slugFromUrl","decodeURIComponent","navigate","categories","setCategories","products","setProducts","query","setQuery","priceRange","setPriceRange","min","max","sortBy","setSortBy","currentPage","setCurrentPage","loading","setLoading","error","setError","showFilters","setShowFilters","imageResults","setImageResults","cancelled","load","_cRes$results","_pRes$results","cRes","pRes","Promise","all","fetch","then","r","json","cats","Array","isArray","results","prods","err","console","activeCategoryObj","_categories$find","find","c","_c$slug","_c$name","_c$id","String","toLowerCase","name","id","param","productMatchesCategory","prod","identifier","_ref3","_pc$id","_ref4","_pc$name","_pc$slug","idNorm","pc","v","includes","pid","pk","pname","title","pslug","filteredProducts","_ref5","_activeCategoryObj$sl","activeIdentifier","q","trim","list","filter","product","_product$price","_product$name","_product$description","desc","description","price","Number","sort","a","b","localeCompare","effectiveFiltered","ITEMS_PER_PAGE","totalPages","Math","ceil","length","paginatedProducts","start","slice","handleCategoryChange","catSlugOrName","_found$slug","found","toSlug","encodeURIComponent","handleClearFilters","className","children","message","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","reload","href","type","placeholder","value","onChange","e","target","map","cat","prev","k","onStart","onFinish","onResults","mapped","onError","msg","style","marginLeft","color","p","disabled","from","_","i","page","_c","$RefreshReg$"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/CategoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport ProductGrid from '../components/ProductGrid';\r\nimport ImageSearchUpload from '../components/ImageSearchUpload';\r\nimport Loading from '../components/Loading';\r\nimport '../assets/CategoryPage.css';\r\n\r\nexport default function CategoryPage() {\r\n  const params = useParams();\r\n  const rawCategoryParam = params.slug ?? params.categoryName ?? params.category ?? '';\r\n  const slugFromUrl = rawCategoryParam ? decodeURIComponent(rawCategoryParam) : '';\r\n  const navigate = useNavigate();\r\n\r\n  // Data\r\n  const [categories, setCategories] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  // UI/Filter state\r\n  const [query, setQuery] = useState('');\r\n  const [priceRange, setPriceRange] = useState({ min: '', max: '' });\r\n  const [sortBy, setSortBy] = useState('relevance');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [imageResults, setImageResults] = useState(null); // danh s√°ch tr·∫£ v·ªÅ t·ª´ search ·∫£nh\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const [cRes, pRes] = await Promise.all([\r\n          fetch('http://localhost:8000/api/categories/').then(r => r.json()),\r\n          fetch('http://localhost:8000/api/products/').then(r => r.json())\r\n        ]);\r\n        if (cancelled) return;\r\n        \r\n        const cats = Array.isArray(cRes) ? cRes : (cRes.results ?? []);\r\n        const prods = Array.isArray(pRes) ? pRes : (pRes.results ?? []);\r\n        \r\n        setCategories(cats);\r\n        setProducts(prods);\r\n      } catch (err) {\r\n        if (cancelled) return;\r\n        console.error('CategoryPage load error', err);\r\n        setError('Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.');\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  // Determine active category\r\n  const activeCategoryObj = useMemo(() => {\r\n    if (!slugFromUrl) return null;\r\n    return categories.find(c => {\r\n      const slug = String(c?.slug ?? '').toLowerCase();\r\n      const name = String(c?.name ?? '').toLowerCase();\r\n      const id = String(c?.id ?? '').toLowerCase();\r\n      const param = String(rawCategoryParam ?? '').toLowerCase();\r\n      return slug === param || name === param || id === param;\r\n    }) ?? null;\r\n  }, [categories, rawCategoryParam, slugFromUrl]);\r\n\r\n  // Product matching\r\n  function productMatchesCategory(prod, identifier) {\r\n    if (!identifier) return true;\r\n    const idNorm = String(identifier).toLowerCase();\r\n    const pc = prod.category;\r\n    if (pc == null) return false;\r\n\r\n    if (typeof pc === 'string' || typeof pc === 'number') {\r\n      const v = String(pc).toLowerCase();\r\n      return v === idNorm || v.includes(idNorm) || idNorm.includes(v);\r\n    }\r\n\r\n    const pid = String(pc.id ?? pc.pk ?? '').toLowerCase();\r\n    const pname = String(pc.name ?? pc.title ?? '').toLowerCase();\r\n    const pslug = String(pc.slug ?? '').toLowerCase();\r\n\r\n    return pid === idNorm || pname === idNorm || pslug === idNorm || \r\n           pname.includes(idNorm) || pslug.includes(idNorm);\r\n  }\r\n\r\n  // Filtered products\r\n  const filteredProducts = useMemo(() => {\r\n    const activeIdentifier = activeCategoryObj \r\n      ? (activeCategoryObj.slug ?? activeCategoryObj.name ?? String(activeCategoryObj.id))\r\n      : (slugFromUrl || '');\r\n    const q = (query || '').trim().toLowerCase();\r\n\r\n    const list = (products || []).filter(product => {\r\n      if (activeIdentifier && !productMatchesCategory(product, activeIdentifier)) return false;\r\n      \r\n      if (q) {\r\n        const name = String(product.name ?? '').toLowerCase();\r\n        const desc = String(product.description ?? '').toLowerCase();\r\n        if (!name.includes(q) && !desc.includes(q)) return false;\r\n      }\r\n      \r\n      const price = Number(product.price ?? 0);\r\n      if (priceRange.min && price < Number(priceRange.min)) return false;\r\n      if (priceRange.max && price > Number(priceRange.max)) return false;\r\n      \r\n      return true;\r\n    });\r\n\r\n    switch (sortBy) {\r\n      case 'price-low':\r\n        list.sort((a, b) => (Number(a.price) || 0) - (Number(b.price) || 0));\r\n        break;\r\n      case 'price-high':\r\n        list.sort((a, b) => (Number(b.price) || 0) - (Number(a.price) || 0));\r\n        break;\r\n      case 'name':\r\n        list.sort((a, b) => String(a.name).localeCompare(String(b.name)));\r\n        break;\r\n      case 'newest':\r\n        list.sort((a, b) => (b.id || 0) - (a.id || 0));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return list;\r\n  }, [products, activeCategoryObj, slugFromUrl, query, priceRange, sortBy]);\r\n\r\n  // Header count d√πng effectiveFiltered thay v√¨ filteredProducts\r\n  const effectiveFiltered = useMemo(() => {\r\n    if (imageResults) return imageResults;\r\n    return filteredProducts;\r\n  }, [imageResults, filteredProducts]);\r\n\r\n  const ITEMS_PER_PAGE = 24;\r\n  const totalPages = Math.max(1, Math.ceil(effectiveFiltered.length / ITEMS_PER_PAGE));\r\n  \r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n  }, [currentPage, totalPages]);\r\n\r\n  const paginatedProducts = useMemo(() => {\r\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return effectiveFiltered.slice(start, start + ITEMS_PER_PAGE);\r\n  }, [effectiveFiltered, currentPage]);\r\n\r\n  // Handlers\r\n  const handleCategoryChange = (catSlugOrName) => {\r\n    if (!catSlugOrName) {\r\n      navigate('/products');\r\n      return;\r\n    }\r\n    const found = categories.find(c => \r\n      String(c.slug) === String(catSlugOrName) || \r\n      String(c.name) === String(catSlugOrName) || \r\n      String(c.id) === String(catSlugOrName)\r\n    );\r\n    const toSlug = found ? (found.slug ?? found.name) : catSlugOrName;\r\n    navigate(`/category/${encodeURIComponent(toSlug)}`);\r\n    setShowFilters(false);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setQuery('');\r\n    setPriceRange({ min: '', max: '' });\r\n    setSortBy('relevance');\r\n    setCurrentPage(1);\r\n    setImageResults(null); // tho√°t ch·∫ø ƒë·ªô t√¨m b·∫±ng ·∫£nh\r\n  };\r\n\r\n  // replace handleImageFileChange usage b·∫±ng ImageSearchUpload\r\n  if (loading) {\r\n    return (\r\n      <div className=\"category-page\">\r\n        <Loading message=\"ƒêang t·∫£i s·∫£n ph·∫©m...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"category-page\">\r\n        <div className=\"error-container\">\r\n          <div className=\"error-icon\">‚ö†Ô∏è</div>\r\n          <h2>C√≥ l·ªói x·∫£y ra</h2>\r\n          <p>{error}</p>\r\n          <button onClick={() => window.location.reload()} className=\"btn btn-primary\">\r\n            Th·ª≠ l·∫°i\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"category-page\">\r\n      <div className=\"category-container\">\r\n        {/* Header */}\r\n        <div className=\"category-header\">\r\n          <div className=\"breadcrumb\">\r\n            <a href=\"/\">Trang ch·ªß</a>\r\n            <span className=\"breadcrumb-separator\">/</span>\r\n            <span className=\"breadcrumb-current\">\r\n              {activeCategoryObj?.name || slugFromUrl || 'T·∫•t c·∫£ s·∫£n ph·∫©m'}\r\n            </span>\r\n          </div>\r\n          \r\n          <h1 className=\"category-title\">\r\n            {activeCategoryObj?.name || slugFromUrl || 'T·∫•t c·∫£ s·∫£n ph·∫©m'}\r\n          </h1>\r\n          \r\n          <p className=\"category-subtitle\">\r\n            {effectiveFiltered.length} s·∫£n ph·∫©m\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"category-content\">\r\n          {/* Sidebar Filters */}\r\n          <aside className={`filters-sidebar ${showFilters ? 'mobile-open' : ''}`}>\r\n            <div className=\"filters-header\">\r\n              <h3>B·ªô l·ªçc</h3>\r\n              <button \r\n                className=\"filters-close\" \r\n                onClick={() => setShowFilters(false)}\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            {/* Search */}\r\n            <div className=\"filter-section\">\r\n              <label className=\"filter-label\">T√¨m ki·∫øm</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"filter-input\"\r\n                placeholder=\"T√¨m s·∫£n ph·∫©m...\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            {/* Categories */}\r\n            <div className=\"filter-section\">\r\n              <label className=\"filter-label\">Danh m·ª•c</label>\r\n              <div className=\"category-list\">\r\n                <button\r\n                  className={`category-item ${!slugFromUrl ? 'active' : ''}`}\r\n                  onClick={() => handleCategoryChange('')}\r\n                >\r\n                  T·∫•t c·∫£\r\n                </button>\r\n                {categories.map((cat) => (\r\n                  <button\r\n                    key={cat.id}\r\n                    className={`category-item ${\r\n                      activeCategoryObj?.id === cat.id ? 'active' : ''\r\n                    }`}\r\n                    onClick={() => handleCategoryChange(cat.slug || cat.name)}\r\n                  >\r\n                    {cat.name}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Price Range */}\r\n            <div className=\"filter-section\">\r\n              <label className=\"filter-label\">Kho·∫£ng gi√°</label>\r\n              <div className=\"price-range-inputs\">\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"filter-input\"\r\n                  placeholder=\"T·ª´\"\r\n                  value={priceRange.min}\r\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, min: e.target.value }))}\r\n                />\r\n                <span className=\"price-separator\">-</span>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"filter-input\"\r\n                  placeholder=\"ƒê·∫øn\"\r\n                  value={priceRange.max}\r\n                  onChange={(e) => setPriceRange(prev => ({ ...prev, max: e.target.value }))}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sort */}\r\n            <div className=\"filter-section\">\r\n              <label className=\"filter-label\">S·∫Øp x·∫øp</label>\r\n              <select\r\n                className=\"filter-select\"\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n              >\r\n                <option value=\"relevance\">Li√™n quan</option>\r\n                <option value=\"price-low\">Gi√°: Th·∫•p ƒë·∫øn cao</option>\r\n                <option value=\"price-high\">Gi√°: Cao ƒë·∫øn th·∫•p</option>\r\n                <option value=\"name\">T√™n: A-Z</option>\r\n                <option value=\"newest\">M·ªõi nh·∫•t</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Clear Filters */}\r\n            <button className=\"btn-clear-filters\" onClick={handleClearFilters}>\r\n              X√≥a b·ªô l·ªçc\r\n            </button>\r\n          </aside>\r\n\r\n          {/* Products Section */}\r\n          <div className=\"products-section\">\r\n            {/* Toolbar */}\r\n            <div className=\"products-toolbar\">\r\n              <button\r\n                className=\"btn-toggle-filters\"\r\n                onClick={() => setShowFilters(!showFilters)}\r\n              >\r\n                <span>üîç</span>\r\n                B·ªô l·ªçc\r\n              </button>\r\n\r\n              <ImageSearchUpload\r\n                k={48}\r\n                onStart={() => setLoading(true)}\r\n                onFinish={() => setLoading(false)}\r\n                onResults={(mapped) => {\r\n                  setImageResults(mapped);\r\n                  setCurrentPage(1);\r\n                  setShowFilters(false);\r\n                }}\r\n                onError={(msg) => setError(msg)}\r\n              />\r\n\r\n              {imageResults && (\r\n                <button className=\"btn\" style={{ marginLeft: 8 }} onClick={() => setImageResults(null)}>\r\n                  H·ªßy k·∫øt qu·∫£ ·∫£nh\r\n                </button>\r\n              )}\r\n\r\n              <div className=\"results-info\">\r\n                Hi·ªÉn th·ªã {paginatedProducts.length} / {effectiveFiltered.length} s·∫£n ph·∫©m\r\n                {imageResults && <span style={{ marginLeft: 8, color: '#888' }}>(k·∫øt qu·∫£ t·ª´ ·∫£nh)</span>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Products Grid */}\r\n            {effectiveFiltered.length === 0 ? (\r\n              <div className=\"empty-state\">\r\n                <div className=\"empty-icon\">üì¶</div>\r\n                <h2>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h2>\r\n                <p>Vui l√≤ng th·ª≠ ƒëi·ªÅu ch·ªânh b·ªô l·ªçc ho·∫∑c t√¨m ki·∫øm kh√°c</p>\r\n                <button className=\"btn btn-primary\" onClick={handleClearFilters}>\r\n                  X√≥a b·ªô l·ªçc\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <ProductGrid products={paginatedProducts} />\r\n\r\n                {/* Pagination */}\r\n                {totalPages > 1 && (\r\n                  <div className=\"pagination\">\r\n                    <button\r\n                      className=\"pagination-btn\"\r\n                      onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\r\n                      disabled={currentPage === 1}\r\n                    >\r\n                      ‚Üê Tr∆∞·ªõc\r\n                    </button>\r\n                    \r\n                    <div className=\"pagination-pages\">\r\n                      {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => (\r\n                        <button\r\n                          key={page}\r\n                          className={`pagination-page ${currentPage === page ? 'active' : ''}`}\r\n                          onClick={() => setCurrentPage(page)}\r\n                        >\r\n                          {page}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n\r\n                    <button\r\n                      className=\"pagination-btn\"\r\n                      onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\r\n                      disabled={currentPage === totalPages}\r\n                    >\r\n                      Sau ‚Üí\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Overlay */}\r\n      {showFilters && (\r\n        <div \r\n          className=\"filters-overlay-backdrop\"\r\n          onClick={() => setShowFilters(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}